<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn & Go - Учим глаголы движения</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        body { background-color: #f8f9fa; font-family: sans-serif; padding-bottom: 70px; }
        .navbar { background-color: #457ab1; }
        .card { border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .btn-primary { background-color: #457ab1; border: none; }
        .btn-primary:hover { background-color: #365f8a; }
        /* Плавная анимация смены цвета кнопок при ответах */
        .btn { transition: all 0.3s ease; }
    </style>
</head>
<body>

    <nav class="navbar navbar-dark mb-4">
        <div class="container justify-content-center">
            <span class="navbar-brand mb-0 h1">
                <img src="images/logo_hum.png" alt="Logo" width="30" class="d-inline-block align-text-top me-2">
                Learn & Go
            </span>
        </div>
    </nav>

    <div class="container text-center">
        <div id="main-menu" class="card p-4 mb-4">
            <h2 class="mb-3">Меню упражнений</h2>
            <p class="lead text-muted">Выберите тему для практики:</p>
            <hr>
            <div id="menu-buttons" class="d-grid gap-3">
                <p>Загрузка упражнений...</p>
            </div>
        </div>

        <div id="exercise-area" class="card p-4 d-none">
            <div class="progress mb-4" style="height: 12px;">
                <div id="upr-progress" class="progress-bar progress-bar-striped progress-bar-animated" 
                     role="progressbar" style="width: 0%; background-color: #457ab1;"></div>
            </div>

            <h3 id="upr-title" class="text-primary mb-4"></h3>
            <p id="upr-text" class="lead fs-2 my-4 fw-bold text-dark"></p>
            
            <div id="upr-buttons" class="d-grid gap-3"></div>
            
            <button class="btn btn-link mt-5 text-decoration-none" onclick="location.reload()">
                ← Вернуться к списку уроков
            </button>
        </div>
    </div>

    <div class="modal fade" id="resultModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content text-center p-4" style="border-radius: 20px;">
                <div class="modal-body">
                    <div id="modal-icon" class="display-1 mb-3"></div>
                    <h2 id="modal-title" class="mb-3"></h2>
                    <p id="modal-text" class="lead mb-4"></p>
                    <button type="button" class="btn btn-primary btn-lg w-100" data-bs-dismiss="modal">Продолжить</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="fixed-bottom bg-light border-top p-2">
        <div class="container d-flex justify-content-around">
            <button class="btn btn-outline-secondary btn-sm">Об авторе</button>
            <button class="btn btn-outline-secondary btn-sm">Правила</button>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="data.js"></script>

    <script>
        function initMenu() {
            console.log("Инициализация меню...");
            const menuBox = document.getElementById('menu-buttons');
            
            // Проверяем, загружен ли массив upr из data.js
            if (typeof upr !== 'undefined' && Array.isArray(upr)) {
                menuBox.innerHTML = ''; // Очищаем текст "Загрузка..."
                
                upr.forEach((item, index) => {
                    // Извлекаем название из первого элемента подмассива (exver)
                    const title = (item[0] && item[0].exver) ? item[0].exver : "Урок " + (index + 1);
                    
                    const btn = document.createElement('button');
                    btn.className = 'btn btn-primary btn-lg mb-2';
                    btn.innerText = 'Урок ' + (index + 1) + ': ' + title;
                    
                    btn.onclick = function() {
                        // Вызываем функцию запуска урока из upr.js
                        if (typeof getupr === 'function') {
                            getupr(index + 1);
                        } else {
                            console.error("Ошибка: функция getupr не найдена!");
                        }
                    };
                    menuBox.appendChild(btn);
                });
            } else {
                menuBox.innerHTML = '<p class="text-danger">Ошибка: данные не загружены. Проверьте data.js</p>';
            }
        }

        // Запускаем создание меню, когда страница полностью готова
        window.onload = initMenu;
    </script>

    <script src="upr.js"></script>

</body>
</html>