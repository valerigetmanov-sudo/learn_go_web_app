<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Фикс интерфейса - Learn & Go</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        /* ПЕРЕМЕННЫЕ */
        :root {
            --bg-body: #f0f4f8;
            --bg-card: #ffffff;
            --text-main: #212529;
            --border-color: #dee2e6;
        }

        /* ТЕМА (исправлено на селектор без тега для надежности) */
        [data-theme="dark"] {
            --bg-body: #121212;
            --bg-card: #1e1e1e;
            --text-main: #e9ecef;
            --border-color: #383d41;
        }

        body { 
            background-color: var(--bg-body); 
            color: var(--text-main); 
            font-family: 'Segoe UI', sans-serif;
            transition: background-color 0.3s ease;
        }

        .content-wrapper { max-width: 600px; margin: 0 auto; padding: 40px 20px; }

        .sandbox-card { 
            background: var(--bg-card); 
            border-radius: 25px; 
            padding: 30px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* СТИЛЬ СЕГМЕНТОВ */
        .segment {
            height: 12px;                /* Высота видна сразу */
            background-color: var(--border-color); 
            border-radius: 3px;
            min-width: 5px;             /* Гарантия видимости */
        }

        .segment.correct { background-color: #28a745 !important; }
        .segment.wrong { background-color: #dc3545 !important; }
        .segment.active { background-color: #457ab1 !important; }

        /* СЕТКА (ДВА РЯДА ПО 15) */
        .segments-grid {
            display: grid;
            grid-template-columns: repeat(15, 1fr); 
            gap: 6px; 
        }

        .test-label { font-size: 0.8rem; font-weight: 800; color: #6c757d; margin-bottom: 15px; display: block; }
    </style>
</head>
<body>

<div class="content-wrapper">
    <div class="sandbox-card">
        <span class="test-label">Прогресс: 15 из 30 (7 ошибок)</span>
        
        <div id="segments-grid" class="segments-grid mb-4"></div>

        <div class="text-center py-4">
            <h4 style="font-weight: 700;">Мы часто ___ в парк.</h4>
        </div>
    </div>

    <div class="text-center mt-4">
        <button class="btn btn-primary px-5 py-2 shadow" onclick="toggleTheme()">
            Переключить тему (День/Ночь)
        </button>
    </div>
</div>

<script>
    // Функция переключения темы (теперь на <html> для 100% срабатывания)
    function toggleTheme() {
        const root = document.documentElement;
        if (root.getAttribute('data-theme') === 'dark') {
            root.removeAttribute('data-theme');
        } else {
            root.setAttribute('data-theme', 'dark');
        }
    }

    // Генерация сегментов именно в том виде, который вы просили
    function renderStaticTest() {
        const total = 30;
        const answered = 15;
        const errorsCount = 7;
        const container = document.getElementById('segments-grid');
        
        if (!container) return;
        container.innerHTML = '';

        // Создаем массив индексов для случайных ошибок
        let indices = Array.from({length: answered}, (_, i) => i);
        // Перемешиваем
        indices.sort(() => Math.random() - 0.5);
        // Берем первые 7 для ошибок
        const errorIndices = indices.slice(0, errorsCount);

        for (let i = 0; i < total; i++) {
            const seg = document.createElement('div');
            seg.className = 'segment';
            
            if (i < answered) {
                // Если индекс в списке ошибок - красный, иначе зеленый
                seg.classList.add(errorIndices.includes(i) ? 'wrong' : 'correct');
            } else if (i === answered) {
                // Текущий вопрос - синий
                seg.classList.add('active');
            }
            
            container.appendChild(seg);
        }
    }

    // Запуск после полной загрузки страницы
    window.addEventListener('DOMContentLoaded', renderStaticTest);
</script>

</body>
</html>